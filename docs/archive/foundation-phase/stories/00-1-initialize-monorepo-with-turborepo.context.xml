<?xml version="1.0" encoding="UTF-8"?>
<story-context>
  <metadata>
    <story-id>00-1</story-id>
    <story-title>Initialize Monorepo with Turborepo</story-title>
    <epic-id>EPIC-00</epic-id>
    <epic-title>Project Scaffolding &amp; Core Setup</epic-title>
    <generated>2025-12-01</generated>
    <priority>P0 - Critical</priority>
    <points>3</points>
  </metadata>

  <story-summary>
    This story establishes the foundational monorepo structure for the HYVVE Platform using Turborepo and pnpm workspaces. It creates the directory structure for all applications (Next.js frontend, NestJS backend) and shared packages (database, UI components, types). The story configures Turborepo pipelines for efficient build orchestration, sets up TypeScript project references for cross-package type checking, and establishes development tooling (ESLint, Prettier). This is the FIRST story in the entire project and blocks all subsequent development work.

    Key Deliverables:
    - Monorepo structure with apps/ and packages/ directories
    - Turborepo configuration with caching for build, dev, lint, and type-check pipelines
    - pnpm workspace configuration
    - TypeScript project references for cross-package imports
    - ESLint 9.x (flat config) and Prettier setup
    - Development environment configuration (.nvmrc, .gitignore, .env.example)
  </story-summary>

  <current-state>
    <existing-structure>
      <directory name="/">
        <item name=".bmad/" type="directory">BMAD module definitions</item>
        <item name=".claude/" type="directory">Claude Code configuration</item>
        <item name="agents/" type="directory">Python agent implementations (pre-existing)</item>
        <item name="docs/" type="directory">Documentation including epics, tech specs, PRD, architecture</item>
        <item name="packages/db/" type="directory">Prisma schema already exists with full database model</item>
        <item name="src/styles/" type="directory">Some legacy styles directory</item>
        <item name="CLAUDE.md" type="file">Project context for AI assistants</item>
        <item name="README.md" type="file">Project documentation</item>
        <item name="tailwind.config.ts" type="file">Tailwind configuration (pre-existing)</item>
        <item name=".gitignore" type="file">Basic Git ignore file exists</item>
      </directory>
    </existing-structure>

    <missing-structure>
      <item>NO monorepo configuration (no turbo.json, pnpm-workspace.yaml, root package.json)</item>
      <item>NO apps/ directory (apps/web and apps/api need to be created)</item>
      <item>NO packages/ui/ directory</item>
      <item>NO packages/shared/ directory</item>
      <item>NO TypeScript configuration (no tsconfig.json)</item>
      <item>NO ESLint or Prettier configuration</item>
      <item>NO .nvmrc file for Node.js version pinning</item>
      <item>NO .env.example template</item>
    </missing-structure>

    <important-notes>
      <note>The packages/db/prisma/schema.prisma file ALREADY EXISTS with a complete database schema. This story should NOT modify it.</note>
      <note>There is a pre-existing agents/ directory with Python code. This story should NOT touch it - it will be configured in Story 00.7.</note>
      <note>There is a pre-existing tailwind.config.ts at the root. This story should leave it as-is or move it to apps/web/ in a future story.</note>
      <note>The project root is: /home/chris/projects/work/Ai Bussiness Hub/</note>
    </important-notes>
  </current-state>

  <technical-requirements>
    <node-environment>
      <requirement>Node.js 20.x LTS required (create .nvmrc with "20")</requirement>
      <requirement>pnpm 9.x for package management</requirement>
      <requirement>Turborepo 2.x for monorepo orchestration</requirement>
    </node-environment>

    <monorepo-structure>
      <exact-structure>
        <![CDATA[
/home/chris/projects/work/Ai Bussiness Hub/
├── apps/
│   ├── web/                    # Next.js 15 (placeholder for Story 00.2)
│   │   ├── package.json        # Minimal: name "@hyvve/web", version "0.1.0"
│   │   └── README.md           # Note: "Configured in Story 00.2"
│   └── api/                    # NestJS 10 (placeholder for Story 00.3)
│       ├── package.json        # Minimal: name "@hyvve/api", version "0.1.0"
│       └── README.md           # Note: "Configured in Story 00.3"
├── packages/
│   ├── db/                     # Prisma (already exists, add package.json)
│   │   ├── prisma/
│   │   │   └── schema.prisma   # ALREADY EXISTS - DO NOT MODIFY
│   │   ├── package.json        # Add with name "@hyvve/db", version "0.1.0"
│   │   └── README.md           # Note: "Full configuration in Story 00.4"
│   ├── ui/                     # Shared UI components (placeholder for Story 00.2)
│   │   ├── package.json        # Minimal: name "@hyvve/ui", version "0.1.0"
│   │   └── README.md           # Note: "Configured in Story 00.2"
│   └── shared/                 # Shared types (placeholder for Story 00.6)
│       ├── package.json        # Minimal: name "@hyvve/shared", version "0.1.0"
│       └── README.md           # Note: "Configured in Story 00.6"
├── turbo.json                  # Turborepo pipeline configuration
├── package.json                # Root workspace configuration
├── pnpm-workspace.yaml         # pnpm workspace definition
├── tsconfig.json               # Root TypeScript configuration
├── .nvmrc                      # Node.js version: "20"
├── .gitignore                  # Updated with monorepo ignores
└── .env.example                # Environment variable template
        ]]>
      </exact-structure>
    </monorepo-structure>

    <turborepo-configuration>
      <pipeline-tasks>
        <task name="build">
          <description>Builds all packages and apps with dependency ordering</description>
          <dependencies>["^build"]</dependencies>
          <outputs>["dist/**", ".next/**", "build/**"]</outputs>
          <cache>true</cache>
        </task>
        <task name="dev">
          <description>Starts all services in development mode (parallel)</description>
          <cache>false</cache>
          <persistent>true</persistent>
        </task>
        <task name="lint">
          <description>Runs ESLint across all packages</description>
          <dependencies>[]</dependencies>
          <outputs>[]</outputs>
          <cache>true</cache>
        </task>
        <task name="type-check">
          <description>Runs TypeScript compiler checks without emitting files</description>
          <dependencies>["^type-check"]</dependencies>
          <outputs>[]</outputs>
          <cache>true</cache>
        </task>
      </pipeline-tasks>

      <turbo-json-example>
        <![CDATA[
{
  "$schema": "https://turbo.build/schema.json",
  "globalDependencies": ["**/.env.*local"],
  "pipeline": {
    "build": {
      "dependsOn": ["^build"],
      "outputs": ["dist/**", ".next/**", "build/**"]
    },
    "dev": {
      "cache": false,
      "persistent": true
    },
    "lint": {
      "outputs": []
    },
    "type-check": {
      "dependsOn": ["^type-check"],
      "outputs": []
    }
  }
}
        ]]>
      </turbo-json-example>
    </turborepo-configuration>

    <typescript-configuration>
      <root-tsconfig>
        <![CDATA[
{
  "compilerOptions": {
    "target": "ES2022",
    "lib": ["ES2022"],
    "module": "ESNext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "allowJs": true,
    "checkJs": false,
    "jsx": "preserve",
    "declaration": true,
    "declarationMap": true,
    "sourceMap": true,
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true,
    "noImplicitReturns": true,
    "skipLibCheck": true,
    "esModuleInterop": true,
    "allowSyntheticDefaultImports": true,
    "forceConsistentCasingInFileNames": true,
    "incremental": true,
    "isolatedModules": true,
    "composite": true
  },
  "exclude": ["node_modules", "dist", "build", ".turbo"]
}
        ]]>
      </root-tsconfig>

      <package-tsconfig-template>
        Each package should have a tsconfig.json that extends the root:
        <![CDATA[
{
  "extends": "../../tsconfig.json",
  "compilerOptions": {
    "outDir": "./dist",
    "rootDir": "./src"
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist"]
}
        ]]>
      </package-tsconfig-template>
    </typescript-configuration>

    <eslint-configuration>
      <version>9.x (flat config format)</version>
      <config-file-name>eslint.config.js</config-file-name>
      <example>
        <![CDATA[
import js from '@eslint/js';
import typescript from '@typescript-eslint/eslint-plugin';
import typescriptParser from '@typescript-eslint/parser';

export default [
  js.configs.recommended,
  {
    files: ['**/*.ts', '**/*.tsx'],
    plugins: {
      '@typescript-eslint': typescript,
    },
    languageOptions: {
      parser: typescriptParser,
      parserOptions: {
        ecmaVersion: 'latest',
        sourceType: 'module',
      },
    },
    rules: {
      '@typescript-eslint/no-unused-vars': ['error', { argsIgnorePattern: '^_' }],
      '@typescript-eslint/no-explicit-any': 'warn',
    },
  },
  {
    ignores: ['node_modules/**', 'dist/**', '.turbo/**', '.next/**'],
  },
];
        ]]>
      </example>
    </eslint-configuration>

    <prettier-configuration>
      <config-file-name>.prettierrc</config-file-name>
      <example>
        <![CDATA[
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": true,
  "printWidth": 100,
  "tabWidth": 2,
  "useTabs": false,
  "arrowParens": "avoid",
  "endOfLine": "lf"
}
        ]]>
      </example>
    </prettier-configuration>
  </technical-requirements>

  <implementation-guidance>
    <step-by-step>
      <step number="1">
        <title>Verify Prerequisites</title>
        <commands>
          <command>node --version  # Should be 20.x</command>
          <command>pnpm --version  # Should be 9.x</command>
        </commands>
        <note>If pnpm is not installed: npm install -g pnpm@9</note>
      </step>

      <step number="2">
        <title>Create .nvmrc File</title>
        <action>Create /home/chris/projects/work/Ai Bussiness Hub/.nvmrc with content: "20"</action>
        <purpose>Pin Node.js version for consistency across development environments</purpose>
      </step>

      <step number="3">
        <title>Create Root package.json</title>
        <file-path>/home/chris/projects/work/Ai Bussiness Hub/package.json</file-path>
        <content>
          <![CDATA[
{
  "name": "hyvve-platform",
  "version": "0.1.0",
  "private": true,
  "description": "HYVVE Platform Foundation - AI-powered business orchestration",
  "workspaces": [
    "apps/*",
    "packages/*"
  ],
  "scripts": {
    "build": "turbo build",
    "dev": "turbo dev",
    "lint": "turbo lint",
    "type-check": "turbo type-check",
    "format": "prettier --write \"**/*.{ts,tsx,js,jsx,json,md}\"",
    "clean": "turbo clean && rm -rf node_modules"
  },
  "devDependencies": {
    "@eslint/js": "^9.0.0",
    "@typescript-eslint/eslint-plugin": "^7.0.0",
    "@typescript-eslint/parser": "^7.0.0",
    "eslint": "^9.0.0",
    "prettier": "^3.0.0",
    "turbo": "^2.0.0",
    "typescript": "^5.0.0"
  },
  "packageManager": "pnpm@9.0.0",
  "engines": {
    "node": ">=20.0.0",
    "pnpm": ">=9.0.0"
  }
}
          ]]>
        </content>
      </step>

      <step number="4">
        <title>Create pnpm-workspace.yaml</title>
        <file-path>/home/chris/projects/work/Ai Bussiness Hub/pnpm-workspace.yaml</file-path>
        <content>
          <![CDATA[
packages:
  - 'apps/*'
  - 'packages/*'
          ]]>
        </content>
      </step>

      <step number="5">
        <title>Create Directory Structure for Apps</title>
        <actions>
          <action>mkdir -p apps/web apps/api</action>
          <action>Create apps/web/package.json with minimal config</action>
          <action>Create apps/web/README.md with note about Story 00.2</action>
          <action>Create apps/api/package.json with minimal config</action>
          <action>Create apps/api/README.md with note about Story 00.3</action>
        </actions>
        <package-json-template name="apps/web/package.json">
          <![CDATA[
{
  "name": "@hyvve/web",
  "version": "0.1.0",
  "private": true,
  "description": "Next.js 15 frontend - configured in Story 00.2",
  "scripts": {
    "dev": "echo 'Next.js configuration in Story 00.2'",
    "build": "echo 'Next.js configuration in Story 00.2'",
    "lint": "echo 'ESLint configuration in Story 00.2'"
  }
}
          ]]>
        </package-json-template>
        <package-json-template name="apps/api/package.json">
          <![CDATA[
{
  "name": "@hyvve/api",
  "version": "0.1.0",
  "private": true,
  "description": "NestJS 10 backend - configured in Story 00.3",
  "scripts": {
    "dev": "echo 'NestJS configuration in Story 00.3'",
    "build": "echo 'NestJS configuration in Story 00.3'",
    "lint": "echo 'ESLint configuration in Story 00.3'"
  }
}
          ]]>
        </package-json-template>
      </step>

      <step number="6">
        <title>Create Directory Structure for Packages</title>
        <actions>
          <action>mkdir -p packages/ui packages/shared (db already exists)</action>
          <action>Create packages/db/package.json (schema.prisma already exists)</action>
          <action>Create packages/ui/package.json with minimal config</action>
          <action>Create packages/shared/package.json with minimal config</action>
        </actions>
        <package-json-template name="packages/db/package.json">
          <![CDATA[
{
  "name": "@hyvve/db",
  "version": "0.1.0",
  "private": true,
  "description": "Prisma database package - configured in Story 00.4",
  "scripts": {
    "db:generate": "echo 'Prisma configuration in Story 00.4'",
    "db:migrate": "echo 'Prisma configuration in Story 00.4'",
    "db:studio": "echo 'Prisma configuration in Story 00.4'"
  }
}
          ]]>
        </package-json-template>
        <package-json-template name="packages/ui/package.json">
          <![CDATA[
{
  "name": "@hyvve/ui",
  "version": "0.1.0",
  "private": true,
  "description": "Shared UI components (shadcn/ui) - configured in Story 00.2",
  "main": "./src/index.ts",
  "types": "./src/index.ts",
  "scripts": {
    "build": "echo 'UI package configuration in Story 00.2'",
    "lint": "echo 'ESLint configuration in Story 00.2'"
  }
}
          ]]>
        </package-json-template>
        <package-json-template name="packages/shared/package.json">
          <![CDATA[
{
  "name": "@hyvve/shared",
  "version": "0.1.0",
  "private": true,
  "description": "Shared TypeScript types and utilities - configured in Story 00.6",
  "main": "./src/index.ts",
  "types": "./src/index.ts",
  "scripts": {
    "build": "tsc",
    "type-check": "tsc --noEmit",
    "lint": "eslint ."
  },
  "dependencies": {},
  "devDependencies": {
    "typescript": "^5.0.0"
  }
}
          ]]>
        </package-json-template>
      </step>

      <step number="7">
        <title>Create turbo.json Configuration</title>
        <file-path>/home/chris/projects/work/Ai Bussiness Hub/turbo.json</file-path>
        <content>See turbo-json-example in technical-requirements section above</content>
      </step>

      <step number="8">
        <title>Create Root TypeScript Configuration</title>
        <file-path>/home/chris/projects/work/Ai Bussiness Hub/tsconfig.json</file-path>
        <content>See root-tsconfig in technical-requirements section above</content>
      </step>

      <step number="9">
        <title>Create ESLint Configuration (Flat Config)</title>
        <file-path>/home/chris/projects/work/Ai Bussiness Hub/eslint.config.js</file-path>
        <content>See eslint-configuration example in technical-requirements section above</content>
      </step>

      <step number="10">
        <title>Create Prettier Configuration</title>
        <file-path>/home/chris/projects/work/Ai Bussiness Hub/.prettierrc</file-path>
        <content>See prettier-configuration example in technical-requirements section above</content>
      </step>

      <step number="11">
        <title>Update .gitignore</title>
        <file-path>/home/chris/projects/work/Ai Bussiness Hub/.gitignore</file-path>
        <action>Append monorepo-specific entries</action>
        <content>
          <![CDATA[
# Dependencies
node_modules/
.pnp
.pnp.js

# Testing
coverage/
.nyc_output

# Next.js
.next/
out/
.vercel

# Production
build/
dist/
*.tsbuildinfo

# Misc
.DS_Store
*.pem

# Debug
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*

# Local env files
.env
.env*.local
.env.production

# Turbo
.turbo

# TypeScript
*.tsbuildinfo
next-env.d.ts

# IDE
.vscode/
.idea/
*.swp
*.swo
*~
          ]]>
        </content>
      </step>

      <step number="12">
        <title>Create .env.example Template</title>
        <file-path>/home/chris/projects/work/Ai Bussiness Hub/.env.example</file-path>
        <content>
          <![CDATA[
# ============================================
# DATABASE (Story 00.4)
# ============================================
# Supabase connection pooler URL (PgBouncer session mode for RLS)
DATABASE_URL="postgresql://user:password@host:6543/database?pgbouncer=true"
# Direct connection for migrations (bypasses pooler)
DIRECT_URL="postgresql://user:password@host:5432/database"

# ============================================
# REDIS (Story 00.5)
# ============================================
REDIS_URL="redis://localhost:6379"

# ============================================
# AUTHENTICATION (Epic 01)
# ============================================
BETTER_AUTH_SECRET="generate-with-openssl-rand-base64-32"
BETTER_AUTH_URL="http://localhost:3000"
GOOGLE_CLIENT_ID=""
GOOGLE_CLIENT_SECRET=""

# ============================================
# AI PROVIDERS (Epic 06 - workspace-level, encrypted in DB)
# ============================================
# Encryption key for API keys stored in database
ENCRYPTION_KEY="generate-with-openssl-rand-base64-32"

# ============================================
# EMAIL (Epic 01)
# ============================================
RESEND_API_KEY=""

# ============================================
# MONITORING (Future)
# ============================================
HELICONE_API_KEY=""

# ============================================
# AGENTOS (Story 00.7)
# ============================================
AGENTOS_PORT="7777"
AGENTOS_HOST="0.0.0.0"

# ============================================
# PUBLIC ENVIRONMENT VARIABLES
# ============================================
NEXT_PUBLIC_API_URL="http://localhost:3001"
NEXT_PUBLIC_WS_URL="ws://localhost:3001"
NEXT_PUBLIC_AGENTOS_URL="http://localhost:7777"
          ]]>
        </content>
      </step>

      <step number="13">
        <title>Install Dependencies</title>
        <commands>
          <command>cd /home/chris/projects/work/Ai\ Bussiness\ Hub</command>
          <command>pnpm install</command>
        </commands>
        <expected-result>All dependencies installed without errors, pnpm-lock.yaml created</expected-result>
      </step>

      <step number="14">
        <title>Update Root README.md</title>
        <file-path>/home/chris/projects/work/Ai Bussiness Hub/README.md</file-path>
        <action>Add setup instructions section</action>
        <content>
          <![CDATA[
## Development Setup

### Prerequisites

- Node.js 20.x LTS (use `nvm use` to switch to version in .nvmrc)
- pnpm 9.x (`npm install -g pnpm@9`)
- Docker Desktop (for PostgreSQL, Redis - Story 00.5)

### Quick Start

```bash
# Install dependencies
pnpm install

# Copy environment template
cp .env.example .env.local

# Start development (after Docker setup in Story 00.5)
pnpm dev
```

### Available Commands

- `pnpm dev` - Start all apps in development mode
- `pnpm build` - Build all packages and apps
- `pnpm lint` - Run ESLint across all packages
- `pnpm type-check` - Run TypeScript compiler checks
- `pnpm format` - Format code with Prettier

### Monorepo Structure

```
hyvve/
├── apps/
│   ├── web/            # Next.js 15 (Story 00.2)
│   └── api/            # NestJS 10 (Story 00.3)
├── packages/
│   ├── db/             # Prisma (Story 00.4)
│   ├── ui/             # shadcn/ui (Story 00.2)
│   └── shared/         # Types (Story 00.6)
└── agents/             # AgentOS (Story 00.7)
```

### Development Status

This project is in active development. Check `docs/archive/foundation-phase/sprint-artifacts/sprint-status.yaml` for current progress.
          ]]>
        </content>
      </step>
    </step-by-step>

    <key-constraints>
      <constraint>Use pnpm workspace protocol for dependencies (e.g., "@hyvve/shared": "workspace:*")</constraint>
      <constraint>All packages must have unique scoped names under @hyvve/ namespace</constraint>
      <constraint>Turborepo pipeline must respect dependency order (packages built before apps)</constraint>
      <constraint>DO NOT modify existing packages/db/prisma/schema.prisma file</constraint>
      <constraint>DO NOT touch the agents/ directory (configured in Story 00.7)</constraint>
      <constraint>Keep minimal package.json files - full configuration in subsequent stories</constraint>
    </key-constraints>

    <performance-targets>
      <target>pnpm install (cold): &lt; 60 seconds</target>
      <target>pnpm build (first run): &lt; 2 minutes (placeholder builds are instant)</target>
      <target>pnpm build (cached): &lt; 10 seconds</target>
      <target>Turborepo cache hit rate: 100% on second identical build</target>
    </performance-targets>
  </implementation-guidance>

  <dependencies>
    <external-dependencies>
      <dependency>
        <name>turbo</name>
        <version>^2.0.0</version>
        <purpose>Monorepo orchestration and task caching</purpose>
      </dependency>
      <dependency>
        <name>typescript</name>
        <version>^5.0.0</version>
        <purpose>Type checking across workspace</purpose>
      </dependency>
      <dependency>
        <name>eslint</name>
        <version>^9.0.0</version>
        <purpose>Code linting (flat config format)</purpose>
      </dependency>
      <dependency>
        <name>@typescript-eslint/eslint-plugin</name>
        <version>^7.0.0</version>
        <purpose>TypeScript-specific ESLint rules</purpose>
      </dependency>
      <dependency>
        <name>@typescript-eslint/parser</name>
        <version>^7.0.0</version>
        <purpose>Parse TypeScript for ESLint</purpose>
      </dependency>
      <dependency>
        <name>prettier</name>
        <version>^3.0.0</version>
        <purpose>Code formatting</purpose>
      </dependency>
    </external-dependencies>

    <story-dependencies>
      <blocking>None - this is the first story</blocking>
      <blocked-by-this>
        <story>00.2 - Configure Next.js 15 Frontend</story>
        <story>00.3 - Configure NestJS Backend</story>
        <story>00.4 - Set Up Database Package with Prisma</story>
        <story>00.5 - Configure Docker Development Environment</story>
        <story>00.6 - Set Up Shared Types Package</story>
        <story>00.7 - Set Up AgentOS Runtime Environment</story>
        <note>ALL subsequent stories in EPIC-00 depend on this story</note>
      </blocked-by-this>
    </story-dependencies>
  </dependencies>

  <file-changes>
    <files-to-create>
      <file path="/.nvmrc">Node.js version pinning (content: "20")</file>
      <file path="/package.json">Root workspace configuration with scripts and dependencies</file>
      <file path="/pnpm-workspace.yaml">Workspace definition for apps/* and packages/*</file>
      <file path="/turbo.json">Turborepo pipeline configuration for build/dev/lint/type-check</file>
      <file path="/tsconfig.json">Root TypeScript configuration with strict mode</file>
      <file path="/eslint.config.js">ESLint 9.x flat config with TypeScript support</file>
      <file path="/.prettierrc">Prettier configuration for code formatting</file>
      <file path="/.env.example">Environment variable template for all stories</file>
      <file path="/apps/web/package.json">Minimal Next.js placeholder package</file>
      <file path="/apps/web/README.md">Note about Story 00.2 configuration</file>
      <file path="/apps/api/package.json">Minimal NestJS placeholder package</file>
      <file path="/apps/api/README.md">Note about Story 00.3 configuration</file>
      <file path="/packages/db/package.json">Minimal Prisma placeholder package</file>
      <file path="/packages/db/README.md">Note about Story 00.4 configuration</file>
      <file path="/packages/ui/package.json">Minimal UI components placeholder package</file>
      <file path="/packages/ui/README.md">Note about Story 00.2 configuration</file>
      <file path="/packages/shared/package.json">Minimal shared types placeholder package</file>
      <file path="/packages/shared/README.md">Note about Story 00.6 configuration</file>
    </files-to-create>

    <files-to-modify>
      <file path="/.gitignore">Append monorepo-specific ignore patterns</file>
      <file path="/README.md">Add Development Setup section with commands and structure</file>
    </files-to-modify>

    <files-not-to-touch>
      <file path="/packages/db/prisma/schema.prisma">Already exists with complete schema - DO NOT MODIFY</file>
      <file path="/agents/**">Python AgentOS code - configured in Story 00.7</file>
      <file path="/tailwind.config.ts">Pre-existing config - will be moved/configured in Story 00.2</file>
      <file path="/src/**">Legacy directory - assess in future stories</file>
    </files-not-to-touch>
  </file-changes>

  <acceptance-verification>
    <acceptance-criteria>
      <criterion id="AC-1">
        <requirement>Create project with Turborepo structure</requirement>
        <verification>
          <command>ls -la /home/chris/projects/work/Ai\ Bussiness\ Hub/ | grep -E "(turbo.json|pnpm-workspace.yaml|package.json)"</command>
          <expected>All three files exist</expected>
        </verification>
      </criterion>

      <criterion id="AC-2">
        <requirement>Configure workspace structure with apps/web, apps/api, packages/db, packages/ui, packages/shared</requirement>
        <verification>
          <command>ls -d /home/chris/projects/work/Ai\ Bussiness\ Hub/{apps/{web,api},packages/{db,ui,shared}}</command>
          <expected>All directories exist</expected>
        </verification>
      </criterion>

      <criterion id="AC-3">
        <requirement>Configure Turborepo pipelines for build, dev, lint</requirement>
        <verification>
          <command>cat turbo.json | grep -E "(build|dev|lint|type-check)"</command>
          <expected>All four pipeline tasks defined</expected>
        </verification>
      </criterion>

      <criterion id="AC-4">
        <requirement>Set up pnpm workspaces</requirement>
        <verification>
          <command>cat pnpm-workspace.yaml</command>
          <expected>Contains "apps/*" and "packages/*"</expected>
        </verification>
      </criterion>

      <criterion id="AC-5">
        <requirement>Configure TypeScript project references</requirement>
        <verification>
          <command>cat tsconfig.json | grep -E "(composite|strict)"</command>
          <expected>TypeScript strict mode and composite enabled</expected>
        </verification>
      </criterion>

      <criterion id="AC-6">
        <requirement>Repository contains all required directories</requirement>
        <verification>
          <command>ls -d apps/web apps/api packages/db packages/ui packages/shared</command>
          <expected>All 5 directories exist</expected>
        </verification>
      </criterion>

      <criterion id="AC-7">
        <requirement>Running pnpm install succeeds without errors</requirement>
        <verification>
          <command>pnpm install</command>
          <expected>Exit code 0, pnpm-lock.yaml created</expected>
        </verification>
      </criterion>

      <criterion id="AC-8">
        <requirement>Running pnpm build builds all packages successfully</requirement>
        <verification>
          <command>pnpm build</command>
          <expected>Exit code 0 (placeholder echo commands succeed)</expected>
        </verification>
      </criterion>

      <criterion id="AC-9">
        <requirement>Running pnpm lint passes with no errors</requirement>
        <verification>
          <command>pnpm lint</command>
          <expected>Exit code 0 (no TypeScript/JavaScript files to lint yet)</expected>
        </verification>
      </criterion>

      <criterion id="AC-10">
        <requirement>Turborepo caching works (second build is faster than first)</requirement>
        <verification>
          <command>pnpm build &amp;&amp; pnpm build</command>
          <expected>Second run shows "cache hit" in Turbo output</expected>
        </verification>
      </criterion>
    </acceptance-criteria>

    <testing-steps>
      <test-sequence>
        <test number="1">
          <description>Clean install test</description>
          <commands>
            <command>rm -rf node_modules pnpm-lock.yaml</command>
            <command>pnpm install</command>
          </commands>
          <expected>Installs successfully in &lt; 60 seconds</expected>
        </test>

        <test number="2">
          <description>Build test</description>
          <commands>
            <command>pnpm build</command>
          </commands>
          <expected>All placeholder builds succeed (echo commands)</expected>
        </test>

        <test number="3">
          <description>Lint test</description>
          <commands>
            <command>pnpm lint</command>
          </commands>
          <expected>No errors (no actual code to lint yet)</expected>
        </test>

        <test number="4">
          <description>Cache hit test</description>
          <commands>
            <command>pnpm build</command>
            <command>pnpm build</command>
          </commands>
          <expected>Second build shows Turborepo cache hits</expected>
        </test>

        <test number="5">
          <description>Type check test</description>
          <commands>
            <command>pnpm type-check</command>
          </commands>
          <expected>No TypeScript errors</expected>
        </test>
      </test-sequence>
    </testing-steps>
  </acceptance-verification>

  <reference-documents>
    <document>
      <title>Tech Spec - EPIC-00</title>
      <path>/home/chris/projects/work/Ai Bussiness Hub/docs/archive/foundation-phase/sprint-artifacts/tech-spec-epic-00.md</path>
      <section>Monorepo Structure, AC-00.1</section>
    </document>

    <document>
      <title>Architecture Document</title>
      <path>/home/chris/projects/work/Ai Bussiness Hub/docs/architecture.md</path>
      <section>Project Structure, Technology Stack</section>
    </document>

    <document>
      <title>Epic 00 - Project Scaffolding</title>
      <path>/home/chris/projects/work/Ai Bussiness Hub/docs/epics/EPIC-00-project-scaffolding.md</path>
      <section>Story 00.1</section>
    </document>

    <document>
      <title>Product Requirements Document</title>
      <path>/home/chris/projects/work/Ai Bussiness Hub/docs/prd.md</path>
      <section>Technology Stack</section>
    </document>

    <document>
      <title>Sprint Status</title>
      <path>/home/chris/projects/work/Ai Bussiness Hub/docs/archive/foundation-phase/sprint-artifacts/sprint-status.yaml</path>
      <section>EPIC-00 status tracking</section>
    </document>
  </reference-documents>

  <common-pitfalls>
    <pitfall>
      <issue>Forgetting to use pnpm workspace protocol</issue>
      <solution>Use "workspace:*" for internal package dependencies, not file: or version numbers</solution>
    </pitfall>

    <pitfall>
      <issue>Trying to configure Next.js or NestJS in this story</issue>
      <solution>This story only creates placeholders. Full configuration happens in Stories 00.2 and 00.3</solution>
    </pitfall>

    <pitfall>
      <issue>Modifying the existing Prisma schema</issue>
      <solution>DO NOT TOUCH packages/db/prisma/schema.prisma - it's already complete</solution>
    </pitfall>

    <pitfall>
      <issue>Using ESLint 8 configuration format</issue>
      <solution>ESLint 9.x requires flat config (eslint.config.js), not .eslintrc.json</solution>
    </pitfall>

    <pitfall>
      <issue>Not testing Turborepo cache</issue>
      <solution>Run pnpm build twice and verify "cache hit" appears in output</solution>
    </pitfall>
  </common-pitfalls>

  <additional-context>
    <project-context>
      <hyvve-vision>
        HYVVE aims to achieve 90% automation with 5 hours/week human involvement for SMB businesses. This monorepo foundation enables modular development of business automation features with AI agents that route decisions through a confidence-based approval system.
      </hyvve-vision>

      <technical-approach>
        The platform uses a hybrid architecture: Next.js 15 for frontend and platform API routes, NestJS for modular business logic, AgentOS (Python/FastAPI) for AI agent runtime, PostgreSQL with RLS for multi-tenancy, and Redis Streams for event-driven communication.
      </technical-approach>

      <multi-tenancy>
        All data is isolated by workspace (tenant). Prisma Client Extensions automatically inject tenantId into queries, with PostgreSQL RLS as a defense-in-depth measure. This story sets up the foundation, but tenant isolation is implemented in Epic 03.
      </multi-tenancy>
    </project-context>

    <next-steps>
      <story number="00.2">Configure Next.js 15 Frontend with App Router, Tailwind CSS 4, shadcn/ui</story>
      <story number="00.3">Configure NestJS 10 Backend with modules, Swagger, health checks</story>
      <story number="00.4">Configure Prisma database package with migrations and client export</story>
      <story number="00.5">Set up Docker environment with PostgreSQL, Redis, AgentOS containers</story>
      <story number="00.6">Configure shared types package with auth, workspace, event types</story>
      <story number="00.7">Configure AgentOS runtime with tenant middleware and Control Plane</story>
    </next-steps>
  </additional-context>
</story-context>
