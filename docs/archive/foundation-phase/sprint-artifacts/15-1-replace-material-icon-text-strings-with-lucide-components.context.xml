<story-context id=".bmad/bmm/workflows/4-implementation/story-context/template" v="1.0">
  <metadata>
    <epicId>EPIC-15</epicId>
    <storyId>15.1</storyId>
    <title>Replace Material Icon Text Strings with Lucide Components</title>
    <status>drafted</status>
    <generatedAt>2025-12-11</generatedAt>
    <generator>BMAD Story Context Workflow</generator>
    <sourceStoryPath>docs/stories/15-1-replace-material-icon-text-strings-with-lucide-components.md</sourceStoryPath>
  </metadata>

  <story>
    <asA>user navigating the platform</asA>
    <iWant>to see proper icons instead of text like "grid_view" and "check_circle"</iWant>
    <soThat>the UI looks professional and is visually understandable</soThat>
    <tasks>
      <task id="1">Replace Material Icon text strings in sidebar navigation (SidebarNavItem.tsx)</task>
      <task id="2">Replace Material Icon text strings in header bar (Header.tsx)</task>
      <task id="3">Replace Material Icon text strings in chat panel (ChatPanel.tsx)</task>
      <task id="4">Replace Material Icon text strings in chat input (ChatInput.tsx)</task>
      <task id="5">Verify no remaining material-icons or material-symbols classes</task>
      <task id="6">Apply consistent icon sizing (h-5 w-5 for nav, h-4 w-4 for inline)</task>
    </tasks>
  </story>

  <acceptanceCriteria>
    <criterion id="AC1">Replace all Material Icon text strings with Lucide React components</criterion>
    <criterion id="AC2">Sidebar icons updated: grid_view→LayoutGrid, check_circle→CheckCircle, smart_toy→Bot, settings→Settings, group→Users, folder_open→Folder</criterion>
    <criterion id="AC3">Header icons updated: search→Search, notifications→Bell, help→HelpCircle, expand_more→ChevronDown</criterion>
    <criterion id="AC4">Chat panel icons updated: @mentions→AtSign, attachments→Paperclip, send→ArrowUp, history→History, minimize→Minimize2, maximize→Maximize2, external link→ExternalLink</criterion>
    <criterion id="AC5">Verify no remaining text-based icon references in codebase</criterion>
    <criterion id="AC6">All icons have appropriate size (default 20px for nav, 16px for inline)</criterion>
    <criterion id="AC7">Icons inherit color from parent for theme support</criterion>
  </acceptanceCriteria>

  <artifacts>
    <docs>
      <doc path="docs/epics/EPIC-15-ui-ux-platform-foundation.md" title="EPIC-15" section="Story 15.1" snippet="Details icon mapping from Material to Lucide, sizing standards, and file modification list." />
      <doc path="docs/archive/foundation-phase/sprint-artifacts/tech-spec-epic-15.md" title="Tech Spec EPIC-15" section="Story 15.1" snippet="Provides icon mapping table, component patterns, verification commands for icon replacement." />
      <doc path="docs/UI-UX-IMPROVEMENTS-BACKLOG.md" title="UI/UX Backlog" section="13.1, 1.2" snippet="Source requirements for icon system overhaul - replace text icons with proper Lucide components." />
    </docs>
    <code>
      <file path="apps/web/src/components/shell/SidebarNavItem.tsx" kind="component" symbol="SidebarNavItem" lines="74-84" reason="Uses material-symbols-outlined class with icon prop as text string. Primary target for icon replacement." />
      <file path="apps/web/src/components/shell/Header.tsx" kind="component" symbol="Header" lines="63-65, 90" reason="Uses material-symbols-rounded for expand_more and help icons. Needs Lucide replacement." />
      <file path="apps/web/src/components/shell/ChatPanel.tsx" kind="component" symbol="ChatPanel" lines="48-53, 111-116, 134-137, 150-152, 168-170, 186-188" reason="Uses material-symbols-outlined for chat_bubble, expand_more, history, remove, open_in_full, open_in_new icons." />
      <file path="apps/web/src/components/chat/ChatInput.tsx" kind="component" symbol="ChatInput" lines="83-88, 106-111, 146-148" reason="Uses material-symbols-outlined for alternate_email, attachment, arrow_upward icons." />
      <file path="apps/web/src/components/shell/Sidebar.tsx" kind="component" symbol="Sidebar" reason="Parent sidebar component - may need verification but icons are in SidebarNavItem." />
      <file path="apps/web/src/components/shell/SidebarNav.tsx" kind="component" symbol="SidebarNav" reason="Defines navigation items with icon prop - check for icon string definitions." />
    </code>
    <dependencies>
      <node>
        <package name="lucide-react" version="^0.263.0" />
        <package name="next" version="15.x" />
        <package name="react" version="^18" />
        <package name="tailwindcss" version="^4" />
      </node>
    </dependencies>
  </artifacts>

  <constraints>
    <constraint type="pattern">Import Lucide icons individually for tree-shaking: import { IconName } from 'lucide-react'</constraint>
    <constraint type="pattern">Use Tailwind classes for sizing: className="h-5 w-5" for nav, "h-4 w-4" for inline</constraint>
    <constraint type="pattern">Icons must inherit color from parent text color for theme support</constraint>
    <constraint type="pattern">Remove all material-symbols-outlined and material-symbols-rounded class usage</constraint>
    <constraint type="coding-standard">Follow existing Lucide usage patterns in codebase (e.g., auth components, approval components)</constraint>
  </constraints>

  <interfaces>
    <interface name="SidebarNavItemProps.icon" kind="prop" signature="icon: string" path="apps/web/src/components/shell/SidebarNavItem.tsx">
      Currently expects Material Icon name string. May need to change to accept LucideIcon or ReactNode.
    </interface>
    <interface name="Lucide Icon Import" kind="import" signature="import { IconName } from 'lucide-react'" path="lucide-react">
      Standard import pattern for Lucide React components.
    </interface>
  </interfaces>

  <tests>
    <standards>
      The project uses Jest with React Testing Library for component tests. Tests should verify icons render as SVG elements rather than text strings. Visual regression tests may be useful but not required.
    </standards>
    <locations>
      <location>apps/web/src/components/**/*.test.tsx</location>
      <location>apps/web/src/**/__tests__/</location>
    </locations>
    <ideas>
      <idea ac="AC1">Test that Sidebar renders SVG icons, not text strings containing icon names</idea>
      <idea ac="AC5">Grep/search test to verify no material-icons strings remain in src/</idea>
      <idea ac="AC6">Visual inspection that icons display at correct sizes</idea>
      <idea ac="AC7">Test icon color changes with parent text color class changes</idea>
    </ideas>
  </tests>
</story-context>
