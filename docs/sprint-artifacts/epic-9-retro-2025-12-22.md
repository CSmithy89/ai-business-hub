# Epic PM-09 Retrospective: Advanced Views

**Date:** 2025-12-22
**Epic:** PM-09
**PR:** https://github.com/CSmithy89/ai-business-hub/pull/35
**Branch:** epic/pm-09-advanced-views
**Follow-up TODOs:** `docs/modules/bm-pm/epics/epic-pm-09-review-todos.md`

## Participants
- chris (Project Lead)
- Bob (Scrum Master)
- Alice (Product Owner)
- Charlie (Senior Dev)
- Dana (QA Engineer)
- Winston (Architect)
- Paige (Tech Writer)

## Epic Summary
- **Goal delivered:** Timeline/Gantt view, portfolio dashboard, cross-project dependencies, view sharing, templates, and view customization.
- **Stories completed:** 6/6
- **Points delivered:** 37
- **Key releases:** Timeline view with drag/resize + critical path, portfolio dashboard + filters, dependencies dashboard, saved view builder, sharing via `viewId`, templates.
- **Review follow-ups tracked:** see `docs/modules/bm-pm/epics/epic-pm-09-review-todos.md`.

## What Went Well
- Shipped all six stories with consistent UI patterns and cohesive PM navigation.
- Timeline view performance improved via virtualization; drag/resize UX validated by unit tests.
- Portfolio and dependencies APIs hardened with scoping, validation, pagination, and caching.
- Review feedback was captured in a dedicated TODO doc and resolved promptly.
- Documentation kept in sync (README + changelog + module README).

## Challenges / What Didnâ€™t Go Well
- Automated tests were not run end-to-end due to WSL instability; coverage gaps remain at E2E/UI level.
- CSRF protection is in place but still missing HMAC-signed tokens (security gap).
- Epic definition drifted from implemented stories (resource utilization vs dependencies; dashboard customization vs view templates).
- Share token security and portfolio cache invalidation are not yet verified.

## Review Feedback Patterns
- Repeated security/scoping reminders (workspace scoping, DTO validation, cross-project boundaries).
- UX edge cases: empty/error state clarity, saved view state freshness, keyboard accessibility.
- Consistency gaps (field naming, share-link behavior) surfaced late.

## Lessons Learned
- Keep epic definitions aligned with implementation scope; update epic docs when scope shifts.
- Track review feedback in a single source of truth and close items before PR merge.
- Establish security baselines early (CSRF token signing, share token validation).
- Validate naming consistency across FE/BE/data model before story close (startedAt vs startDate).

## Technical Debt & Follow-ups
Open follow-ups are tracked in:
- `docs/modules/bm-pm/epics/epic-pm-09-review-todos.md`

Highlights:
- CSRF HMAC signing
- startedAt/startDate consistency review
- Health score formula documentation
- E2E and component test coverage
- Portfolio cache invalidation
- Share token security validation
- Observability for new endpoints

## Next Epic Preview: PM-10 Workflow Builder
- **Objective:** Visual workflow builder with triggers, actions, testing, and management.
- **Dependencies:** Task relations (PM-02.8) and event bus patterns.
- **Preparation needs:** Choose node editor library, define workflow JSON schema, event trigger mapping, and execution safety controls.
- **Risk areas:** Complex UX, workflow validation, and execution side effects.

## Significant Discoveries
- Epic scope drift: PM-09 epic doc describes resource utilization and dashboard customization, but delivered dependencies + view templates.
- CSRF protection requires HMAC-signed tokens to be robust.
- Cross-stack naming mismatch risk around startedAt/startDate.

## Readiness Assessment
- **Testing:** Unit tests added for timeline, portfolio, and dependencies; E2E coverage pending.
- **Deployment:** Not verified in this retro.
- **Stakeholder acceptance:** Not documented in story notes; needs explicit confirmation.
- **Technical health:** Stable with known follow-up items listed above.

## Action Items (Owners)
1. Implement HMAC-signed CSRF tokens in API middleware and controller. (Owner: Winston)
2. Validate and standardize startedAt/startDate across schema, API, and UI. (Owner: Charlie)
3. Document healthScore calculation in PM tech docs. (Owner: Alice)
4. Add E2E tests for timeline drag/resize, portfolio filters + drill-down, and view sharing. (Owner: Dana)
5. Add component tests for PortfolioDashboard, DependenciesDashboard, SavedViewsDropdown. (Owner: Dana)
6. Add portfolio cache invalidation on task/project updates. (Owner: Charlie)
7. Verify share token generation/validation security. (Owner: Winston)
8. Add observability for /pm/portfolio and /pm/dependencies (latency + cache hits). (Owner: Winston)
9. Update Epic PM-09 doc to align with delivered stories. (Owner: Alice)

## Preparation Tasks for Epic PM-10
- Select workflow editor library and validate UX fit.
- Define workflow schema and validation rules.
- Map event bus triggers to workflow execution.
- Define safe action execution boundaries and auditing needs.

## Critical Path Items
- CSRF HMAC signing
- startedAt/startDate consistency
- Share token security validation

## Commitments & Next Steps
- Track action items in standups and keep review TODOs visible.
- Confirm stakeholder acceptance for PM-09 deliverables.
- Start PM-10 planning once critical path items are resolved.
