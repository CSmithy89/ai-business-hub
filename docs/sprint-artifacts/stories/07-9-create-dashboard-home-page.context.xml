<?xml version="1.0" encoding="UTF-8"?>
<story-context>
  <metadata>
    <story-id>07-9</story-id>
    <story-title>Create Dashboard Home Page</story-title>
    <epic-id>EPIC-07</epic-id>
    <epic-title>UI Shell</epic-title>
    <created-date>2025-12-04</created-date>
    <status>ready-for-dev</status>
    <points>2</points>
  </metadata>

  <objectives>
    <primary>
      Create the Dashboard Home Page with widget grid, welcome section, quick actions,
      and activity feed to serve as the main landing page after login.
    </primary>
    <secondary>
      - Provide overview of workspace status with stat cards
      - Display recent activity feed for awareness
      - Offer quick access to common tasks
      - Implement responsive layout for all screen sizes
    </secondary>
  </objectives>

  <technical-context>
    <architecture-references>
      <document path="docs/architecture.md">
        - Frontend: Next.js 15 App Router
        - Styling: Tailwind CSS 4 with design tokens
        - UI Components: shadcn/ui
      </document>
      <document path="docs/sprint-artifacts/tech-spec-epic-07.md">
        - Dashboard layout structure
        - Responsive breakpoints
        - Design tokens and color system
        - Component patterns
      </document>
    </architecture-references>

    <design-references>
      <wireframe id="DB-01" path="docs/design/wireframes/Finished wireframes and html files/db-01_dashboard_overview/code.html">
        Dashboard overview layout with stats and activity feed
      </wireframe>
      <design-system path="src/styles/tokens.css">
        Complete design token system with light/dark themes
      </design-system>
    </design-references>

    <dependencies>
      <story id="07-1" status="done">Dashboard Layout Component</story>
      <story id="07-2" status="done">Sidebar Navigation</story>
      <story id="07-3" status="done">Header Bar</story>
      <package name="@radix-ui/react-*">shadcn/ui components</package>
      <package name="tailwindcss">Styling with design tokens</package>
    </dependencies>
  </technical-context>

  <implementation-details>
    <component-structure>
      <component name="DashboardWelcome" path="apps/web/src/components/dashboard/DashboardWelcome.tsx">
        Welcome section with greeting, subtitle, and quick action dropdown
      </component>
      <component name="DashboardStats" path="apps/web/src/components/dashboard/DashboardStats.tsx">
        Grid of stat cards showing key metrics (approvals, agents, confidence, usage)
      </component>
      <component name="DashboardActivity" path="apps/web/src/components/dashboard/DashboardActivity.tsx">
        Activity feed with recent events and timestamps
      </component>
      <component name="DashboardQuickActions" path="apps/web/src/components/dashboard/DashboardQuickActions.tsx">
        Quick action buttons for common tasks
      </component>
      <page path="apps/web/src/app/(dashboard)/dashboard/page.tsx">
        Main dashboard page that composes all components
      </page>
    </component-structure>

    <data-models>
      <type name="StatCard">
        <description>Stat card data structure</description>
        <fields>
          - id: string
          - title: string
          - value: string | number
          - change?: { value: number; direction: 'up' | 'down' }
          - icon: string (Material Symbols icon name)
          - color: 'primary' | 'success' | 'warning' | 'info'
        </fields>
      </type>
      <type name="ActivityItem">
        <description>Activity feed item structure</description>
        <fields>
          - id: string
          - type: 'agent' | 'approval' | 'warning' | 'member' | 'system'
          - title: string
          - description: string
          - timestamp: Date
        </fields>
      </type>
    </data-models>

    <design-tokens>
      <token>--color-bg-primary: Cream background</token>
      <token>--color-bg-secondary: White cards</token>
      <token>--color-text-primary: Primary text</token>
      <token>--color-text-secondary: Secondary text</token>
      <token>--color-primary-500: Coral primary</token>
      <token>--color-accent-500: Teal accent</token>
      <token>--color-success-500: Green success</token>
      <token>--color-warning-500: Amber warning</token>
      <token>--color-info-500: Blue info</token>
    </design-tokens>

    <responsive-layout>
      <breakpoint name="mobile" width="<640px">Single column layout</breakpoint>
      <breakpoint name="tablet" width="640-1024px">2 column grid</breakpoint>
      <breakpoint name="desktop" width=">1024px">4 column grid</breakpoint>
    </responsive-layout>
  </implementation-details>

  <testing-strategy>
    <manual-tests>
      <test>Navigate to /dashboard and verify all components render</test>
      <test>Check stat cards display correct icons, values, and colors</test>
      <test>Verify activity feed shows all mock items with timestamps</test>
      <test>Test responsive layout at mobile, tablet, and desktop widths</test>
      <test>Verify quick actions are accessible and styled correctly</test>
      <test>Check light/dark theme support</test>
    </manual-tests>

    <edge-cases>
      <case>Long activity descriptions should truncate or wrap properly</case>
      <case>Empty state when no activities (future consideration)</case>
      <case>Very large stat values should format correctly</case>
      <case>Mobile landscape orientation</case>
    </edge-cases>
  </testing-strategy>

  <acceptance-criteria>
    <criterion id="AC-07.9.1" status="met">
      Page at /dashboard route renders correctly
    </criterion>
    <criterion id="AC-07.9.2" status="met">
      Welcome message with placeholder user name
    </criterion>
    <criterion id="AC-07.9.3" status="met">
      Quick stats cards display all four metrics
    </criterion>
    <criterion id="AC-07.9.4" status="met">
      Recent activity feed with mock data
    </criterion>
    <criterion id="AC-07.9.5" status="met">
      Quick actions section with buttons
    </criterion>
    <criterion id="AC-07.9.6" status="met">
      Responsive layout adapts to viewport
    </criterion>
  </acceptance-criteria>

  <related-code>
    <file path="apps/web/src/app/(dashboard)/layout.tsx">
      Dashboard layout wrapper - provides three-panel structure
    </file>
    <file path="apps/web/src/components/ui/card.tsx">
      shadcn/ui Card component - used for stat cards
    </file>
    <file path="src/styles/tokens.css">
      Design tokens - color, spacing, typography system
    </file>
    <file path="apps/web/src/app/globals.css">
      Global styles and CSS imports
    </file>
  </related-code>

  <notes>
    <note type="implementation">
      Using mock data for initial implementation. Real API integration
      will come in future stories when backend services are ready.
    </note>
    <note type="design">
      Material Symbols icons used for consistency with rest of UI Shell.
      Icons are loaded via Google Fonts (already configured in project).
    </note>
    <note type="accessibility">
      All stat cards include proper ARIA labels for screen readers.
      Activity feed uses semantic time elements for timestamps.
    </note>
    <note type="future">
      Quick actions dropdown will be enhanced in future story to show
      personalized actions based on user role and recent activity.
    </note>
  </notes>
</story-context>
