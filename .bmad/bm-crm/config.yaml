# BM-CRM Module Configuration
# AI Business Hub - Customer Relationship Management
# Created: 2025-11-29

module:
  name: bm-crm
  display_name: CRM Module
  description: |
    Customer relationship management with AI-powered lead scoring,
    data enrichment, and pipeline automation.
  version: 0.1.0
  status: scaffold  # scaffold | development | alpha | beta | stable

# Agents in this module
agents:
  - id: lead-scorer-agent
    name: Scout
    status: scaffold
    description: Lead scoring and qualification specialist

  - id: data-enricher-agent
    name: Atlas
    status: scaffold
    description: Contact data enrichment from external sources

  - id: pipeline-agent
    name: Flow
    status: scaffold
    description: Deal pipeline automation and progression

# Workflows to be created
workflows:
  - id: lead-scoring
    name: Lead Scoring Flow
    status: todo
    description: Score new leads when created or enriched
    trigger: contact.created, contact.enriched
    agents: [lead-scorer-agent]

  - id: contact-enrichment
    name: Contact Enrichment Flow
    status: todo
    description: Enrich contacts with external data
    trigger: user-initiated, scheduled
    agents: [data-enricher-agent, lead-scorer-agent]

  - id: pipeline-automation
    name: Pipeline Automation Flow
    status: todo
    description: Suggest and execute automations on stage changes
    trigger: deal.stage_changed
    agents: [pipeline-agent]
    requires_approval: true

  - id: stuck-deal-alert
    name: Stuck Deal Alert Flow
    status: todo
    description: Identify and alert on stuck deals
    trigger: scheduled (daily)
    agents: [pipeline-agent]

# Tasks (one-shot operations)
tasks:
  - id: bulk-score
    name: Bulk Lead Scoring
    status: todo
    description: Score all unscored leads in batch

  - id: bulk-enrich
    name: Bulk Contact Enrichment
    status: todo
    description: Enrich multiple contacts with rate limiting

  - id: pipeline-health-report
    name: Pipeline Health Report
    status: todo
    description: Generate pipeline health metrics report

# Checklists
checklists:
  - id: new-lead-checklist
    name: New Lead Checklist
    status: todo
    items:
      - Verify email format
      - Check for duplicates
      - Score lead
      - Assign to rep if score > threshold
      - Add to nurture sequence if score < threshold

  - id: deal-stage-checklist
    name: Deal Stage Transition Checklist
    status: todo
    items:
      - Verify previous stage requirements met
      - Update close probability
      - Trigger stage-specific automations
      - Notify relevant stakeholders

# Dependencies
dependencies:
  requires:
    - orchestrator  # For approval gates
  required_by:
    - bms    # Sales uses CRM data
    - bmx    # Email uses CRM contacts

# Runtime configuration
runtime:
  agno_implementation: agents/crm/
  database_tables:
    - contacts
    - companies
    - deals
    - activities
    - lead_scores
    - enrichment_cache
  external_apis:
    - clearbit (enrichment)
    - linkedin (enrichment)
    - email_verification_service

# Event triggers (pub/sub)
events:
  publishes:
    - contact.created
    - contact.updated
    - contact.enriched
    - deal.created
    - deal.stage_changed
    - deal.won
    - deal.lost
    - lead.scored
  subscribes:
    - user.action.enrich_contact
    - user.action.score_lead
    - user.action.move_deal
